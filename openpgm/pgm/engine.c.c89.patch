--- engine.c	2010-05-23 15:43:35.000000000 +0800
+++ engine.c89	2010-08-04 10:30:53.000000000 +0800
@@ -85,6 +85,7 @@
 	pgm_rand_init();
 
 #ifdef _WIN32
+	{
 	WORD wVersionRequested = MAKEWORD (2, 2);
 	WSADATA wsaData;
 	if (WSAStartup (wVersionRequested, &wsaData) != 0)
@@ -142,6 +143,7 @@
 		closesocket (sock);
 	}
 #	endif
+	}
 #endif /* _WIN32 */
 
 /* find PGM protocol id overriding default value, use first value from NIS */
@@ -168,6 +170,7 @@
 		}
 	}
 #else
+	{
 	const struct protoent *proto = getprotobyname ("pgm");
 	if (proto != NULL) {
 		if (proto->p_proto != pgm_ipproto_pgm) {
@@ -181,9 +184,11 @@
 			pgm_ipproto_pgm = proto->p_proto;
 		}
 	}
+	}
 #endif
 
 /* ensure timing enabled */
+	{
 	pgm_error_t* sub_error = NULL;
 	if (!pgm_time_init (&sub_error)) {
 		if (sub_error)
@@ -193,9 +198,11 @@
 #endif
 		goto err_shutdown;
 	}
+	}
 
 /* receiver simulated loss rate */
 #ifdef PGM_DEBUG
+	{
 	const char *loss_rate = getenv ("PGM_LOSS_RATE");
 	if (NULL != loss_rate) {
 		int value = atoi (loss_rate);
@@ -204,6 +211,7 @@
 			pgm_minor (_("Setting PGM packet loss rate to %i%%."), pgm_loss_rate);
 		}
 	}
+	}
 #endif
 
 /* create global sock list lock */
