--- indextoaddr.c	2011-06-19 07:39:30.000000000 +0800
+++ indextoaddr.c89.c	2011-06-19 07:39:40.000000000 +0800
@@ -46,7 +46,9 @@
 
 	if (0 == ifindex)		/* any interface or address */
 	{
+#pragma warning( disable : 4244 )
 		ifsa->sa_family = iffamily;
+#pragma warning( default : 4244 )
 		switch (iffamily) {
 		case AF_INET:
 			((struct sockaddr_in*)ifsa)->sin_addr.s_addr = INADDR_ANY;
@@ -63,6 +65,7 @@
 		return TRUE;
 	}
 
+	{
 	struct pgm_ifaddrs_t *ifap, *ifa;
 	if (!pgm_getifaddrs (&ifap, error)) {
 		pgm_prefix_error (error,
@@ -76,6 +79,7 @@
 		    ifa->ifa_addr->sa_family != iffamily)
 			continue;
 
+		{
 		const unsigned i = pgm_if_nametoindex (iffamily, ifa->ifa_name);
 		pgm_assert (0 != i);
 		if (i == ifindex)
@@ -86,6 +90,7 @@
 			pgm_freeifaddrs (ifap);
 			return TRUE;
 		}
+		}
 	}
 
 	pgm_set_error (error,
@@ -95,6 +100,7 @@
 		     ifindex);
 	pgm_freeifaddrs (ifap);
 	return FALSE;
+	}
 }
 
 /* eof */
